<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Management System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 260px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .logo {
            padding: 0 25px 30px;
            border-bottom: 2px solid #f0f0f0;
            margin-bottom: 20px;
        }

        .logo h2 {
            color: #667eea;
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 28px;
        }

        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            color: #555;
            border-left: 4px solid transparent;
        }

        .nav-item:hover {
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.1) 0%, transparent 100%);
            border-left-color: #667eea;
            color: #667eea;
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.15) 0%, transparent 100%);
            border-left-color: #667eea;
            color: #667eea;
            font-weight: 600;
        }

        .nav-item i {
            font-size: 20px;
            width: 25px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 30px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-header {
            background: white;
            padding: 25px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-header h1 {
            color: #333;
            font-size: 32px;
            margin-bottom: 5px;
        }

        .page-header p {
            color: #777;
            font-size: 14px;
        }

        /* Dashboard Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .stat-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .stat-card h3 {
            color: #777;
            font-size: 14px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .stat-change {
            font-size: 13px;
            color: #10b981;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-change.negative {
            color: #ef4444;
        }

        /* Property Grid */
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .property-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .property-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.15);
        }

        .property-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .property-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .property-badge.rented {
            color: #10b981;
        }

        .property-badge.available {
            color: #667eea;
        }

        .property-badge.maintenance {
            color: #f59e0b;
        }

        .property-badge.pending {
            color: #ef4444;
        }

        .property-content {
            padding: 20px;
        }

        .property-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }

        .property-location {
            color: #777;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .property-details {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }

        .property-detail {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #555;
        }

        .property-detail i {
            color: #667eea;
        }

        .property-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .property-price {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
        }

        .property-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-view {
            background: #e0f2fe;
            color: #0284c7;
        }

        .btn-view:hover {
            background: #0284c7;
            color: white;
        }

        .btn-clone {
            background: #fef3c7;
            color: #d97706;
        }

        .btn-clone:hover {
            background: #d97706;
            color: white;
        }

        .btn-edit {
            background: #f0f0f0;
            color: #667eea;
        }

        .btn-edit:hover {
            background: #667eea;
            color: white;
        }

        .btn-delete {
            background: #fee;
            color: #ef4444;
        }

        .btn-delete:hover {
            background: #ef4444;
            color: white;
        }

        /* Form Styles */
        .form-container {
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #555;
        }

        .btn-secondary:hover {
            background: #e5e5e5;
        }

        /* Cash Flow */
        .cash-flow-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .flow-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .flow-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .flow-title {
            font-size: 16px;
            color: #777;
            font-weight: 600;
        }

        .flow-amount {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .flow-amount.income {
            color: #10b981;
        }

        .flow-amount.expense {
            color: #ef4444;
        }

        .flow-amount.profit {
            color: #667eea;
        }

        .transaction-list {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.3s ease;
        }

        .transaction-item:hover {
            background: #f9f9f9;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-info h4 {
            font-size: 15px;
            color: #333;
            margin-bottom: 5px;
        }

        .transaction-info p {
            font-size: 13px;
            color: #777;
        }

        .transaction-amount {
            font-size: 18px;
            font-weight: 700;
        }

        .transaction-amount.income {
            color: #10b981;
        }

        .transaction-amount.expense {
            color: #ef4444;
        }

        /* Settings */
        .settings-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .settings-section h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info h4 {
            font-size: 15px;
            color: #333;
            margin-bottom: 5px;
        }

        .setting-info p {
            font-size: 13px;
            color: #777;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #667eea;
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        /* Image Upload Styles */
        .image-upload-container {
            margin-top: 10px;
        }

        .upload-area {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(102, 126, 234, 0.05);
        }

        .upload-area:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #764ba2;
        }

        .upload-area i {
            font-size: 48px;
            color: #667eea;
            margin-bottom: 15px;
        }

        .upload-area p {
            font-size: 16px;
            color: #333;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .upload-area span {
            font-size: 13px;
            color: #777;
        }

        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .preview-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            aspect-ratio: 1;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-remove {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .preview-remove:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        /* Amenities Grid */
        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 12px 15px;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: white;
        }

        .checkbox-label:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .checkbox-label input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .checkbox-label span {
            font-size: 14px;
            color: #555;
        }

        .checkbox-label input[type="checkbox"]:checked + span {
            color: #667eea;
            font-weight: 600;
        }

        /* Collapsible Section Styles */
        .collapsible-section {
            margin-bottom: 25px;
            border: 2px solid #e5e5e5;
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .collapsible-section:hover {
            border-color: #667eea;
        }

        .collapsible-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
        }

        .collapsible-header:hover {
            background: linear-gradient(135deg, #5568d3 0%, #6a3f8f 100%);
        }

        .collapsible-header h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .collapsible-header i {
            font-size: 14px;
            transition: transform 0.3s ease;
        }

        .collapsible-header.active i {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: white;
        }

        .collapsible-content.active {
            max-height: 2000px;
        }

        .collapsible-inner {
            padding: 25px;
        }

        .section-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 25px 30px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 22px;
            color: #333;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #777;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: #ef4444;
        }

        .modal-body {
            padding: 30px;
        }

        .modal-footer {
            padding: 20px 30px;
            border-top: 2px solid #f0f0f0;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .btn-danger {
            background: #ef4444;
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* Search and Filter */
        .search-filter {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 45px 12px 15px;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }

        .filter-select {
            padding: 12px 15px;
            border: 2px solid #e5e5e5;
            border-radius: 10px;
            font-size: 14px;
            background: white;
            min-width: 150px;
        }

        .filter-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #777;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 20px;
            color: #ccc;
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #555;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }

            .main-content {
                margin-left: 70px;
            }

            .nav-item span {
                display: none;
            }

            .logo h2 span {
                display: none;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .property-grid {
                grid-template-columns: 1fr;
            }

            .amenities-grid {
                grid-template-columns: 1fr;
            }

            .collapsible-header h3 {
                font-size: 14px;
            }

            .section-badge {
                display: none;
            }

            .search-filter {
                flex-direction: column;
            }

            .search-box {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2><i class="fas fa-building"></i> <span>PropManager</span></h2>
            </div>
            <nav>
                <div class="nav-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="showPage('properties')">
                    <i class="fas fa-building"></i>
                    <span>Properties</span>
                </div>
                <div class="nav-item" onclick="showPage('add-property')">
                    <i class="fas fa-plus-circle"></i>
                    <span>Add Property</span>
                </div>
                <div class="nav-item" onclick="showPage('cash-flow')">
                    <i class="fas fa-chart-line"></i>
                    <span>Cash Flow</span>
                </div>
                <div class="nav-item" onclick="showPage('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="page-header">
                    <div>
                        <h1>Dashboard</h1>
                        <p>Welcome back! Here's your property overview</p>
                    </div>
                    <button class="btn btn-primary" onclick="showPage('add-property')">
                        <i class="fas fa-plus"></i> Add Property
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <h3>Total Properties</h3>
                            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                                <i class="fas fa-building"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="totalProperties">3</div>
                        <div class="stat-change">
                            <i class="fas fa-arrow-up"></i> Active properties
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-header">
                            <h3>Monthly Revenue</h3>
                            <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="monthlyRevenue">$9,800</div>
                        <div class="stat-change">
                            <i class="fas fa-arrow-up"></i> 8.3% from last month
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-header">
                            <h3>Occupied Units</h3>
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="occupiedUnits">67%</div>
                        <div class="stat-change">
                            <i class="fas fa-arrow-up"></i> 3% from last month
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card-header">
                            <h3>Maintenance</h3>
                            <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                                <i class="fas fa-tools"></i>
                            </div>
                        </div>
                        <div class="stat-value" id="maintenanceRequests">1</div>
                        <div class="stat-change negative">
                            <i class="fas fa-arrow-down"></i> Pending requests
                        </div>
                    </div>
                </div>
                
                <div class="page-header">
                    <h2>Recent Properties</h2>
                </div>
                
                <div class="property-grid" id="recent-properties">
                    <!-- Recent properties will be loaded here -->
                </div>
            </div>

            <!-- Properties Page -->
            <div id="properties" class="page">
                <div class="page-header">
                    <div>
                        <h1>Properties</h1>
                        <p>Manage your property portfolio</p>
                    </div>
                    <button class="btn btn-primary" onclick="showPage('add-property')">
                        <i class="fas fa-plus"></i> Add Property
                    </button>
                </div>

                <!-- Search and Filter -->
                <div class="search-filter">
                    <div class="search-box">
                        <input type="text" id="search-input" placeholder="Search properties by name, location...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <select class="filter-select" id="status-filter">
                        <option value="">All Status</option>
                        <option value="rented">Rented</option>
                        <option value="available">Available</option>
                        <option value="maintenance">Under Maintenance</option>
                        <option value="pending">Pending</option>
                    </select>
                    <select class="filter-select" id="type-filter">
                        <option value="">All Types</option>
                        <option value="apartment">Apartment</option>
                        <option value="house">House</option>
                        <option value="villa">Villa</option>
                        <option value="condo">Condominium</option>
                    </select>
                </div>

                <div class="property-grid" id="properties-grid">
                    <!-- Properties will be loaded here dynamically -->
                </div>
                
                <div id="empty-state" class="empty-state" style="display: none;">
                    <i class="fas fa-building"></i>
                    <h3>No Properties Found</h3>
                    <p>Add your first property to get started</p>
                    <button class="btn btn-primary" onclick="showPage('add-property')" style="margin-top: 20px;">
                        <i class="fas fa-plus"></i> Add Property
                    </button>
                </div>
            </div>

            <!-- Add Property Page -->
            <div id="add-property" class="page">
                <div class="page-header">
                    <h1 id="formTitle">Add New Property</h1>
                    <p id="formSubtitle">Enter property details to add to your portfolio</p>
                </div>

                <div class="form-container">
                    <form id="propertyForm">
                        <input type="hidden" id="propertyId" name="propertyId">
                        <input type="hidden" id="formMode" value="add">
                        
                        <!-- Image Upload Section -->
                        <div class="form-group full-width">
                            <label>Property Images</label>
                            <div class="image-upload-container">
                                <input type="file" id="imageUpload" accept="image/*" multiple style="display: none;">
                                <div class="upload-area" onclick="document.getElementById('imageUpload').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload images or drag and drop</p>
                                    <span>PNG, JPG, JPEG up to 5MB each</span>
                                </div>
                                <div id="imagePreview" class="image-preview-grid"></div>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Property Name *</label>
                                <input type="text" id="propertyName" name="propertyName" placeholder="e.g., Sunset Apartments" required>
                            </div>
                            <div class="form-group">
                                <label>Property Type *</label>
                                <select id="propertyType" name="propertyType" required>
                                    <option value="">Select property type</option>
                                    <optgroup label="Residential">
                                        <option value="studio">Studio Apartment</option>
                                        <option value="apartment">Apartment</option>
                                        <option value="flat">Flat</option>
                                        <option value="penthouse">Penthouse</option>
                                        <option value="loft">Loft</option>
                                        <option value="house">Single Family House</option>
                                        <option value="villa">Villa</option>
                                        <option value="bungalow">Bungalow</option>
                                        <option value="cottage">Cottage</option>
                                        <option value="mansion">Mansion</option>
                                        <option value="townhouse">Townhouse</option>
                                        <option value="condo">Condominium</option>
                                        <option value="duplex">Duplex</option>
                                        <option value="triplex">Triplex</option>
                                        <option value="fourplex">Fourplex</option>
                                        <option value="mobile-home">Mobile Home</option>
                                        <option value="farmhouse">Farmhouse</option>
                                    </optgroup>
                                    <optgroup label="Commercial">
                                        <option value="office">Office Space</option>
                                        <option value="retail">Retail Shop</option>
                                        <option value="restaurant">Restaurant</option>
                                        <option value="warehouse">Warehouse</option>
                                        <option value="industrial">Industrial Building</option>
                                        <option value="showroom">Showroom</option>
                                        <option value="mall">Shopping Mall</option>
                                        <option value="hotel">Hotel</option>
                                        <option value="hospital">Hospital/Clinic</option>
                                        <option value="school">School/Educational</option>
                                        <option value="gym">Gym/Fitness Center</option>
                                        <option value="theater">Theater/Cinema</option>
                                    </optgroup>
                                    <optgroup label="Mixed Use">
                                        <option value="mixed-residential">Mixed Use Residential</option>
                                        <option value="mixed-commercial">Mixed Use Commercial</option>
                                        <option value="live-work">Live-Work Space</option>
                                    </optgroup>
                                    <optgroup label="Land & Others">
                                        <option value="plot">Residential Plot</option>
                                        <option value="commercial-land">Commercial Land</option>
                                        <option value="agricultural">Agricultural Land</option>
                                        <option value="farmland">Farmland</option>
                                        <option value="industrial-land">Industrial Land</option>
                                        <option value="parking">Parking Space/Garage</option>
                                        <option value="storage">Storage Unit</option>
                                    </optgroup>
                                    <optgroup label="Luxury & Special">
                                        <option value="beach-house">Beach House</option>
                                        <option value="lake-house">Lake House</option>
                                        <option value="mountain-cabin">Mountain Cabin</option>
                                        <option value="estate">Estate</option>
                                        <option value="castle">Castle/Historic Property</option>
                                        <option value="resort">Resort Property</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>

                        <div class="form-group full-width">
                            <label>Street Address *</label>
                            <input type="text" id="streetAddress" name="streetAddress" placeholder="Enter street address" required>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>City *</label>
                                <input type="text" id="city" name="city" placeholder="Enter city" required>
                            </div>
                            <div class="form-group">
                                <label>State/Province *</label>
                                <select id="state" name="state" required>
                                    <option value="">Select state</option>
                                    <option value="AL">Alabama</option>
                                    <option value="CA">California</option>
                                    <option value="FL">Florida</option>
                                    <option value="NY">New York</option>
                                    <option value="TX">Texas</option>
                                    <option value="IL">Illinois</option>
                                    <option value="PA">Pennsylvania</option>
                                    <option value="OH">Ohio</option>
                                    <option value="GA">Georgia</option>
                                    <option value="NC">North Carolina</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Zip Code *</label>
                                <input type="text" id="zipCode" name="zipCode" placeholder="Enter zip code" required>
                            </div>
                            <div class="form-group">
                                <label>Country *</label>
                                <select id="country" name="country" required>
                                    <option value="">Select country</option>
                                    <option value="USA">United States</option>
                                    <option value="Canada">Canada</option>
                                    <option value="UK">United Kingdom</option>
                                    <option value="India">India</option>
                                    <option value="Australia">Australia</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Bedrooms *</label>
                                <select id="bedrooms" name="bedrooms" required>
                                    <option value="">Select</option>
                                    <option value="0">Studio</option>
                                    <option value="1">1 Bedroom</option>
                                    <option value="2">2 Bedrooms</option>
                                    <option value="3">3 Bedrooms</option>
                                    <option value="4">4 Bedrooms</option>
                                    <option value="5">5+ Bedrooms</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Bathrooms *</label>
                                <select id="bathrooms" name="bathrooms" required>
                                    <option value="">Select</option>
                                    <option value="1">1 Bathroom</option>
                                    <option value="1.5">1.5 Bathrooms</option>
                                    <option value="2">2 Bathrooms</option>
                                    <option value="2.5">2.5 Bathrooms</option>
                                    <option value="3">3 Bathrooms</option>
                                    <option value="3.5">3.5 Bathrooms</option>
                                    <option value="4">4+ Bathrooms</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Square Feet *</label>
                                <input type="number" id="sqft" name="sqft" placeholder="Total area" required>
                            </div>
                            <div class="form-group">
                                <label>Year Built</label>
                                <input type="number" id="yearBuilt" name="yearBuilt" placeholder="e.g., 2020" min="1800" max="2025">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Purchase Price</label>
                                <input type="number" id="purchasePrice" name="purchasePrice" placeholder="Purchase price" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Monthly Rent *</label>
                                <input type="number" id="monthlyRent" name="monthlyRent" placeholder="Monthly rent amount" required step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Security Deposit</label>
                                <input type="number" id="securityDeposit" name="securityDeposit" placeholder="Security deposit amount" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>HOA Fees</label>
                                <input type="number" id="hoaFees" name="hoaFees" placeholder="Monthly HOA fees" step="0.01">
                            </div>
                        </div>

                        <!-- NEW FIELDS START -->
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Property Tax (Annual)</label>
                                <input type="number" id="propertyTax" name="propertyTax" placeholder="Annual property tax" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Insurance (Monthly)</label>
                                <input type="number" id="insurance" name="insurance" placeholder="Monthly insurance cost" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Maintenance Budget (Monthly)</label>
                                <input type="number" id="maintenanceBudget" name="maintenanceBudget" placeholder="Monthly maintenance budget" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>Utility Costs (Monthly)</label>
                                <input type="number" id="utilityCosts" name="utilityCosts" placeholder="Average monthly utilities" step="0.01">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Purchase Date</label>
                                <input type="date" id="purchaseDate" name="purchaseDate">
                            </div>
                            <div class="form-group">
                                <label>Lease Start Date</label>
                                <input type="date" id="leaseStartDate" name="leaseStartDate">
                            </div>
                            <div class="form-group">
                                <label>Lease End Date</label>
                                <input type="date" id="leaseEndDate" name="leaseEndDate">
                            </div>
                            <div class="form-group">
                                <label>Last Inspection Date</label>
                                <input type="date" id="lastInspectionDate" name="lastInspectionDate">
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Lot Size (sqft)</label>
                                <input type="number" id="lotSize" name="lotSize" placeholder="Lot size in square feet">
                            </div>
                            <div class="form-group">
                                <label>Number of Floors</label>
                                <input type="number" id="floors" name="floors" placeholder="Total floors" min="1">
                            </div>
                            <div class="form-group">
                                <label>Garage Spaces</label>
                                <input type="number" id="garageSpaces" name="garageSpaces" placeholder="Number of garage spaces" min="0">
                            </div>
                            <div class="form-group">
                                <label>Roof Type</label>
                                <select id="roofType" name="roofType">
                                    <option value="">Select roof type</option>
                                    <option value="asphalt">Asphalt Shingles</option>
                                    <option value="metal">Metal</option>
                                    <option value="tile">Tile</option>
                                    <option value="flat">Flat</option>
                                    <option value="slate">Slate</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Heating System</label>
                                <select id="heatingSystem" name="heatingSystem">
                                    <option value="">Select heating system</option>
                                    <option value="central">Central Heating</option>
                                    <option value="forced-air">Forced Air</option>
                                    <option value="radiant">Radiant</option>
                                    <option value="boiler">Boiler</option>
                                    <option value="heat-pump">Heat Pump</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Cooling System</label>
                                <select id="coolingSystem" name="coolingSystem">
                                    <option value="">Select cooling system</option>
                                    <option value="central">Central AC</option>
                                    <option value="window">Window Units</option>
                                    <option value="split">Split System</option>
                                    <option value="evaporative">Evaporative</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Flooring Type</label>
                                <select id="flooringType" name="flooringType">
                                    <option value="">Select flooring</option>
                                    <option value="hardwood">Hardwood</option>
                                    <option value="carpet">Carpet</option>
                                    <option value="tile">Tile</option>
                                    <option value="laminate">Laminate</option>
                                    <option value="vinyl">Vinyl</option>
                                    <option value="mixed">Mixed</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Water Source</label>
                                <select id="waterSource" name="waterSource">
                                    <option value="">Select water source</option>
                                    <option value="municipal">Municipal</option>
                                    <option value="well">Well</option>
                                    <option value="both">Both</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Sewer System</label>
                                <select id="sewerSystem" name="sewerSystem">
                                    <option value="">Select sewer system</option>
                                    <option value="public">Public Sewer</option>
                                    <option value="septic">Septic Tank</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Zoning Type</label>
                                <select id="zoningType" name="zoningType">
                                    <option value="">Select zoning</option>
                                    <option value="residential">Residential</option>
                                    <option value="commercial">Commercial</option>
                                    <option value="mixed">Mixed Use</option>
                                    <option value="industrial">Industrial</option>
                                    <option value="agricultural">Agricultural</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>View Type</label>
                                <select id="viewType" name="viewType">
                                    <option value="">Select view</option>
                                    <option value="none">No View</option>
                                    <option value="city">City View</option>
                                    <option value="water">Water View</option>
                                    <option value="mountain">Mountain View</option>
                                    <option value="garden">Garden View</option>
                                    <option value="park">Park View</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Construction Quality</label>
                                <select id="constructionQuality" name="constructionQuality">
                                    <option value="">Select quality</option>
                                    <option value="basic">Basic</option>
                                    <option value="standard">Standard</option>
                                    <option value="high-end">High-End</option>
                                    <option value="luxury">Luxury</option>
                                </select>
                            </div>
                        </div>
                        <!-- NEW FIELDS END -->

                        <div class="form-grid">
                            <div class="form-group">
                                <label>Parking Spaces</label>
                                <select id="parkingSpaces" name="parkingSpaces">
                                    <option value="">Select</option>
                                    <option value="0">No Parking</option>
                                    <option value="1">1 Space</option>
                                    <option value="2">2 Spaces</option>
                                    <option value="3">3+ Spaces</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Furnished Status</label>
                                <select id="furnishedStatus" name="furnishedStatus">
                                    <option value="unfurnished">Unfurnished</option>
                                    <option value="semi">Semi-Furnished</option>
                                    <option value="furnished">Fully Furnished</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Pet Policy</label>
                                <select id="petPolicy" name="petPolicy">
                                    <option value="no">No Pets</option>
                                    <option value="cats">Cats Only</option>
                                    <option value="dogs">Dogs Only</option>
                                    <option value="both">Cats & Dogs</option>
                                    <option value="negotiable">Negotiable</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Property Status *</label>
                                <select id="propertyStatus" name="propertyStatus" required>
                                    <option value="available">Available</option>
                                    <option value="rented">Rented</option>
                                    <option value="maintenance">Under Maintenance</option>
                                    <option value="pending">Pending</option>
                                </select>
                            </div>
                        </div>

                        <!-- Basic Amenities Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-star"></i>
                                    Property Amenities
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="amenities-grid">
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="pool">
                                            <span>Swimming Pool</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="gym">
                                            <span>Gym/Fitness Center</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="ac">
                                            <span>Air Conditioning</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="heating">
                                            <span>Central Heating</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="balcony">
                                            <span>Balcony/Patio</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="garden">
                                            <span>Garden/Yard</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="security">
                                            <span>24/7 Security</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="elevator">
                                            <span>Elevator</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="laundry">
                                            <span>Laundry Facilities</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="dishwasher">
                                            <span>Dishwasher</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="internet">
                                            <span>High-Speed Internet</span>
                                        </label>
                                        <label class="checkbox-label">
                                            <input type="checkbox" name="amenities" value="storage">
                                            <span>Storage Space</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Investment Metrics Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-chart-line"></i>
                                    Investment Metrics
                                    <span class="section-badge">Advanced</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Occupancy Rate (%)</label>
                                            <input type="number" id="occupancyRate" name="occupancyRate" placeholder="Auto-calculated" class="input-field" readonly style="background: #f5f5f5;">
                                        </div>
                                        <div class="form-group">
                                            <label>Cap Rate (%)</label>
                                            <input type="number" id="capRate" name="capRate" placeholder="Capitalization rate" step="0.1" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Expected ROI (%)</label>
                                            <input type="number" id="expectedROI" name="expectedROI" placeholder="Return on investment" step="0.1" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Annual NOI ($)</label>
                                            <input type="number" id="annualNOI" name="annualNOI" placeholder="Net operating income" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Cash on Cash Return (%)</label>
                                            <input type="number" id="cashOnCash" name="cashOnCash" placeholder="Cash on cash return" step="0.1" class="input-field">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Loan Details Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-university"></i>
                                    Loan & Financing Details
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Loan Amount ($)</label>
                                            <input type="number" id="loanAmount" name="loanAmount" placeholder="Total loan amount" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Interest Rate (%)</label>
                                            <input type="number" id="interestRate" name="interestRate" placeholder="Annual interest rate" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Loan Term (Years)</label>
                                            <input type="number" id="loanTerm" name="loanTerm" placeholder="e.g., 30" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Monthly Payment ($)</label>
                                            <input type="number" id="monthlyPayment" name="monthlyPayment" placeholder="Auto-calculated" step="0.01" class="input-field" readonly style="background: #f5f5f5;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Costs Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-receipt"></i>
                                    Additional Costs & Expenses
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Closing Costs ($)</label>
                                            <input type="number" id="closingCosts" name="closingCosts" placeholder="One-time closing costs" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Renovation Costs ($)</label>
                                            <input type="number" id="renovationCosts" name="renovationCosts" placeholder="Renovation expenses" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Management Fee ($)</label>
                                            <input type="number" id="managementFee" name="managementFee" placeholder="Monthly management fee" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Vacancy Rate (%)</label>
                                            <input type="number" id="vacancyRate" name="vacancyRate" placeholder="Expected vacancy %" step="0.1" class="input-field">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Market Analysis Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-chart-area"></i>
                                    Market Analysis & Projections
                                    <span class="section-badge">Advanced</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Current Market Value ($)</label>
                                            <input type="number" id="currentMarketValue" name="currentMarketValue" placeholder="Current market value" step="0.01" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Appreciation Rate (%)</label>
                                            <input type="number" id="appreciationRate" name="appreciationRate" placeholder="Annual appreciation" step="0.1" value="3.0" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Rental Income Growth (%)</label>
                                            <input type="number" id="rentalGrowth" name="rentalGrowth" placeholder="Annual rent increase" step="0.1" value="2.0" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Expense Growth Rate (%)</label>
                                            <input type="number" id="expenseGrowth" name="expenseGrowth" placeholder="Annual expense increase" step="0.1" value="2.0" class="input-field">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tenant Information Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-users"></i>
                                    Tenant Information
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Tenant Name</label>
                                            <input type="text" id="tenantName" name="tenantName" placeholder="Current tenant name" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Tenant Email</label>
                                            <input type="email" id="tenantEmail" name="tenantEmail" placeholder="Tenant email" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Tenant Phone</label>
                                            <input type="tel" id="tenantPhone" name="tenantPhone" placeholder="Tenant phone" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Lease End Date</label>
                                            <input type="date" id="tenantLeaseEndDate" name="tenantLeaseEndDate" class="input-field">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Property Manager Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-user-tie"></i>
                                    Property Manager Details
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Manager Name</label>
                                            <input type="text" id="managerName" name="managerName" placeholder="Property manager name" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Manager Email</label>
                                            <input type="email" id="managerEmail" name="managerEmail" placeholder="Manager email" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Manager Phone</label>
                                            <input type="tel" id="managerPhone" name="managerPhone" placeholder="Manager phone" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Management Company</label>
                                            <input type="text" id="managementCompany" name="managementCompany" placeholder="Company name" class="input-field">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Documentation Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-file-alt"></i>
                                    Property Documentation
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label>Deed Number</label>
                                            <input type="text" id="deedNumber" name="deedNumber" placeholder="Property deed number" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Tax ID</label>
                                            <input type="text" id="taxID" name="taxID" placeholder="Property tax ID" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Insurance Policy #</label>
                                            <input type="text" id="insurancePolicy" name="insurancePolicy" placeholder="Insurance policy number" class="input-field">
                                        </div>
                                        <div class="form-group">
                                            <label>Insurance Expiry</label>
                                            <input type="date" id="insuranceExpiry" name="insuranceExpiry" class="input-field">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notes & Strategy Section -->
                        <div class="collapsible-section">
                            <div class="collapsible-header" onclick="toggleSection(this)">
                                <h3>
                                    <i class="fas fa-lightbulb"></i>
                                    Notes, Tags & Strategy
                                    <span class="section-badge">Optional</span>
                                </h3>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="collapsible-content">
                                <div class="collapsible-inner">
                                    <div class="form-group full-width">
                                        <label>Property Tags</label>
                                        <input type="text" id="propertyTags" name="propertyTags" placeholder="e.g., luxury, beachfront, downtown" class="input-field">
                                        <p style="font-size: 12px; color: #777; margin-top: 5px;">Separate tags with commas</p>
                                    </div>
                                    <div class="form-group full-width">
                                        <label>Investment Strategy</label>
                                        <select id="investmentStrategy" name="investmentStrategy" class="input-field">
                                            <option value="">Select strategy</option>
                                            <option value="buy-hold">Buy & Hold</option>
                                            <option value="flip">Fix & Flip</option>
                                            <option value="rental">Long-term Rental</option>
                                            <option value="short-term">Short-term Rental</option>
                                            <option value="commercial">Commercial Lease</option>
                                            <option value="development">Development</option>
                                        </select>
                                    </div>
                                    <div class="form-group full-width">
                                        <label>Investment Notes</label>
                                        <textarea id="investmentNotes" name="investmentNotes" placeholder="Additional notes about this investment..." rows="3" class="input-field"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group full-width">
                            <label>Property Description</label>
                            <textarea id="description" name="description" placeholder="Enter detailed property description, highlights, and special features..." rows="5"></textarea>
                        </div>

                        <div class="form-group full-width">
                            <label>Additional Notes</label>
                            <textarea id="additionalNotes" name="additionalNotes" placeholder="Any additional information or special conditions..." rows="3"></textarea>
                        </div>

                        <div style="display: flex; gap: 15px; margin-top: 20px;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> <span id="submitBtnText">Save Property</span>
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetPropertyForm()">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Cash Flow Page -->
            <div id="cash-flow" class="page">
                <div class="page-header">
                    <h1>Cash Flow Overview</h1>
                    <p>Track your income and expenses</p>
                </div>

                <div class="cash-flow-cards">
                    <div class="flow-card">
                        <div class="flow-header">
                            <span class="flow-title">Total Income</span>
                            <i class="fas fa-arrow-up" style="color: #10b981; font-size: 24px;"></i>
                        </div>
                        <div class="flow-amount income" id="totalIncome">$9,800</div>
                        <p style="color: #777; font-size: 13px;">This month</p>
                    </div>

                    <div class="flow-card">
                        <div class="flow-header">
                            <span class="flow-title">Total Expenses</span>
                            <i class="fas fa-arrow-down" style="color: #ef4444; font-size: 24px;"></i>
                        </div>
                        <div class="flow-amount expense" id="totalExpenses">$2,450</div>
                        <p style="color: #777; font-size: 13px;">This month</p>
                    </div>

                    <div class="flow-card">
                        <div class="flow-header">
                            <span class="flow-title">Net Profit</span>
                            <i class="fas fa-chart-line" style="color: #667eea; font-size: 24px;"></i>
                        </div>
                        <div class="flow-amount profit" id="netProfit">$7,350</div>
                        <p style="color: #777; font-size: 13px;">This month</p>
                    </div>
                </div>

                <div class="transaction-list">
                    <h3 style="margin-bottom: 20px; color: #333;">Recent Transactions</h3>
                    <div id="transactions-list">
                        <!-- Transactions will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings" class="page">
                <div class="page-header">
                    <h1>Settings</h1>
                    <p>Manage your account and preferences</p>
                </div>

                <div class="settings-section">
                    <h3>Profile Settings</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" value="John Anderson" placeholder="Enter your name">
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" value="john@propmanager.com" placeholder="Enter your email">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" value="+1 (555) 123-4567" placeholder="Enter phone number">
                        </div>
                        <div class="form-group">
                            <label>Company Name</label>
                            <input type="text" value="Anderson Properties LLC" placeholder="Enter company name">
                        </div>
                    </div>
                    <button class="btn btn-primary" style="margin-top: 15px;">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </div>

                <div class="settings-section">
                    <h3>Notification Preferences</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Email Notifications</h4>
                            <p>Receive email updates about rent payments and maintenance</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Payment Reminders</h4>
                            <p>Get notified when rent is due or overdue</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Maintenance Alerts</h4>
                            <p>Receive notifications for maintenance requests</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Monthly Reports</h4>
                            <p>Get monthly financial summary reports via email</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>App Preferences</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Dark Mode</h4>
                            <p>Enable dark theme for the interface</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h4>Auto-Save</h4>
                            <p>Automatically save form changes</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="form-group" style="margin-top: 20px;">
                        <label>Currency</label>
                        <select style="max-width: 300px;">
                            <option>USD - US Dollar ($)</option>
                            <option>EUR - Euro ()</option>
                            <option>GBP - British Pound ()</option>
                            <option>INR - Indian Rupee ()</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Date Format</label>
                        <select style="max-width: 300px;">
                            <option>MM/DD/YYYY</option>
                            <option>DD/MM/YYYY</option>
                            <option>YYYY-MM-DD</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Security</h3>
                    
                    <div class="form-group">
                        <label>Current Password</label>
                        <input type="password" placeholder="Enter current password" style="max-width: 400px;">
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" placeholder="Enter new password" style="max-width: 400px;">
                    </div>
                    <div class="form-group">
                        <label>Confirm New Password</label>
                        <input type="password" placeholder="Confirm new password" style="max-width: 400px;">
                    </div>
                    
                    <button class="btn btn-primary" style="margin-top: 10px;">
                        <i class="fas fa-lock"></i> Update Password
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button class="modal-close" onclick="closeModal('delete-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this property? This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('delete-modal')">Cancel</button>
                <button class="btn btn-danger" id="confirm-delete">Delete Property</button>
            </div>
        </div>
    </div>

    <script>
        // Property Data Storage
        let properties = {
            1: {
                id: 1,
                propertyName: "Sunset Apartments",
                propertyType: "apartment",
                streetAddress: "123 Main St",
                city: "New York",
                state: "NY",
                zipCode: "10001",
                country: "USA",
                bedrooms: "3",
                bathrooms: "2",
                sqft: "1200",
                monthlyRent: "2500",
                propertyStatus: "rented",
                image: "https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400"
            },
            2: {
                id: 2,
                propertyName: "Ocean View Villa",
                propertyType: "villa",
                streetAddress: "456 Beach Rd",
                city: "Miami",
                state: "FL",
                zipCode: "33101",
                country: "USA",
                bedrooms: "4",
                bathrooms: "3",
                sqft: "2500",
                monthlyRent: "4200",
                propertyStatus: "available",
                image: "https://images.unsplash.com/photo-1516455590571-18256e5bb9ff?w=400"
            },
            3: {
                id: 3,
                propertyName: "Downtown Loft",
                propertyType: "apartment",
                streetAddress: "789 City Ave",
                city: "Chicago",
                state: "IL",
                zipCode: "60601",
                country: "USA",
                bedrooms: "2",
                bathrooms: "2",
                sqft: "1800",
                monthlyRent: "3100",
                propertyStatus: "rented",
                image: "https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=400"
            }
        };
        
        let nextPropertyId = 4;
        let uploadedImages = [];
        let currentDeleteId = null;

        // Page Navigation
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            document.getElementById(pageId).classList.add('active');
            
            // Find the nav item that corresponds to the page
            const navItem = Array.from(navItems).find(item => {
                return item.getAttribute('onclick')?.includes(pageId);
            });
            
            if (navItem) {
                navItem.classList.add('active');
            }
            
            // Load properties when properties page is shown
            if (pageId === 'properties') {
                renderProperties();
            }
            
            // Reset form when add property page is shown
            if (pageId === 'add-property' && document.getElementById('formMode').value === 'add') {
                resetPropertyForm();
            }
            
            // Update dashboard when dashboard is shown
            if (pageId === 'dashboard') {
                updateDashboard();
            }
            
            // Update cash flow when cash flow page is shown
            if (pageId === 'cash-flow') {
                updateCashFlow();
            }
        }

        // Toggle collapsible sections
        function toggleSection(element) {
            const content = element.nextElementSibling;
            element.classList.toggle('active');
            content.classList.toggle('active');
        }

        // Render Properties
        function renderProperties() {
            const propertyGrid = document.getElementById('properties-grid');
            const recentProperties = document.getElementById('recent-properties');
            
            if (Object.keys(properties).length === 0) {
                document.getElementById('empty-state').style.display = 'block';
                propertyGrid.innerHTML = '';
                recentProperties.innerHTML = '<p>No properties added yet.</p>';
                return;
            }
            
            document.getElementById('empty-state').style.display = 'none';
            
            // Sort properties by ID (newest first)
            const sortedProperties = Object.values(properties).sort((a, b) => b.id - a.id);
            
            // Render all properties
            propertyGrid.innerHTML = sortedProperties.map(property => createPropertyCard(property)).join('');
            
            // Render recent properties (last 3)
            const recent = sortedProperties.slice(0, 3);
            recentProperties.innerHTML = recent.map(property => createPropertyCard(property)).join('');
            
            // Apply filters
            filterProperties();
        }

        // Create property card HTML
        function createPropertyCard(property) {
            const statusClass = property.propertyStatus === 'rented' ? 'rented' : 
                               property.propertyStatus === 'available' ? 'available' : 
                               property.propertyStatus === 'maintenance' ? 'maintenance' : 'pending';
            
            const statusText = property.propertyStatus === 'rented' ? 'Rented' : 
                              property.propertyStatus === 'available' ? 'Available' : 
                              property.propertyStatus === 'maintenance' ? 'Under Maintenance' : 'Pending';
            
            return `
                <div class="property-card" data-property-id="${property.id}">
                    <div class="property-image" style="background-image: url('${property.image || 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400'}');">
                        <div class="property-badge ${statusClass}">${statusText}</div>
                    </div>
                    <div class="property-content">
                        <h3 class="property-title">${property.propertyName}</h3>
                        <p class="property-location">
                            <i class="fas fa-map-marker-alt"></i> ${property.streetAddress}, ${property.city}
                        </p>
                        <div class="property-details">
                            <div class="property-detail">
                                <i class="fas fa-bed"></i> ${property.bedrooms} Beds
                            </div>
                            <div class="property-detail">
                                <i class="fas fa-bath"></i> ${property.bathrooms} Bath
                            </div>
                            <div class="property-detail">
                                <i class="fas fa-ruler-combined"></i> ${property.sqft} sqft
                            </div>
                        </div>
                        <div class="property-footer">
                            <div class="property-price">$${parseFloat(property.monthlyRent).toLocaleString()}/mo</div>
                            <div class="property-actions">
                                <button class="btn-icon btn-view" onclick="viewProperty(${property.id})" title="View Details">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-icon btn-clone" onclick="cloneProperty(${property.id})" title="Clone Property">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="btn-icon btn-edit" onclick="editProperty(${property.id})" title="Edit Property">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon btn-delete" onclick="deleteProperty(${property.id})" title="Delete Property">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // View Property Details
        function viewProperty(id) {
            const property = properties[id];
            if (!property) return;
            
            let details = `Property Details:\n\n`;
            details += `Name: ${property.propertyName}\n`;
            details += `Type: ${property.propertyType}\n`;
            details += `Address: ${property.streetAddress}, ${property.city}, ${property.state} ${property.zipCode}\n`;
            details += `Bedrooms: ${property.bedrooms}\n`;
            details += `Bathrooms: ${property.bathrooms}\n`;
            details += `Square Feet: ${property.sqft}\n`;
            details += `Monthly Rent: $${property.monthlyRent}\n`;
            details += `Status: ${property.propertyStatus}\n`;
            
            if (property.yearBuilt) details += `Year Built: ${property.yearBuilt}\n`;
            if (property.purchasePrice) details += `Purchase Price: $${property.purchasePrice}\n`;
            if (property.propertyTax) details += `Annual Property Tax: $${property.propertyTax}\n`;
            if (property.description) details += `\nDescription: ${property.description}`;
            
            alert(details);
        }

        // Clone Property
        function cloneProperty(id) {
            const property = properties[id];
            if (!property) return;
            
            if (confirm(`Clone "${property.propertyName}"? This will create a copy with " (Copy)" appended to the name.`)) {
                const newProperty = { ...property };
                newProperty.id = nextPropertyId++;
                newProperty.propertyName = property.propertyName + " (Copy)";
                
                properties[newProperty.id] = newProperty;
                renderProperties();
                updateDashboard();
                
                alert(`Property "${newProperty.propertyName}" has been cloned successfully!`);
            }
        }

        // Edit Property
        function editProperty(id) {
            const property = properties[id];
            if (!property) return;
            
            // Switch to add-property page
            showPage('add-property');
            
            // Update form title
            document.getElementById('formTitle').textContent = 'Edit Property';
            document.getElementById('formSubtitle').textContent = 'Update property details';
            document.getElementById('submitBtnText').textContent = 'Update Property';
            document.getElementById('formMode').value = 'edit';
            document.getElementById('propertyId').value = id;
            
            // Clear all checkboxes first
            document.querySelectorAll('input[name="amenities"]').forEach(cb => cb.checked = false);
            
            // Populate form with property data
            Object.keys(property).forEach(key => {
                const field = document.getElementById(key);
                if (field && key !== 'id' && key !== 'image' && key !== 'images' && key !== 'amenities') {
                    field.value = property[key];
                }
            });
            
            // Handle amenities checkboxes
            if (property.amenities) {
                property.amenities.forEach(amenity => {
                    const checkbox = document.querySelector(`input[name="amenities"][value="${amenity}"]`);
                    if (checkbox) checkbox.checked = true;
                });
            }
            
            // Handle images
            uploadedImages = [];
            if (property.images && property.images.length > 0) {
                uploadedImages = [...property.images];
                displayImages();
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Delete Property
        function deleteProperty(id) {
            currentDeleteId = id;
            document.getElementById('delete-modal').classList.add('active');
        }

        // Confirm Delete
        function confirmDelete() {
            if (!currentDeleteId) return;
            
            const property = properties[currentDeleteId];
            if (!property) return;
            
            delete properties[currentDeleteId];
            renderProperties();
            updateDashboard();
            updateCashFlow();
            
            closeModal('delete-modal');
            alert(`Property "${property.propertyName}" has been deleted successfully.`);
        }

        // Close Modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            currentDeleteId = null;
        }

        // Reset Form
        function resetPropertyForm() {
            document.getElementById('propertyForm').reset();
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('formTitle').textContent = 'Add New Property';
            document.getElementById('formSubtitle').textContent = 'Enter property details to add to your portfolio';
            document.getElementById('submitBtnText').textContent = 'Save Property';
            document.getElementById('formMode').value = 'add';
            document.getElementById('propertyId').value = '';
            uploadedImages = [];
            
            // Clear all checkboxes
            document.querySelectorAll('input[name="amenities"]').forEach(cb => cb.checked = false);
            
            // Close all collapsible sections
            document.querySelectorAll('.collapsible-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.classList.remove('active');
            });
        }

        // Filter Properties
        function filterProperties() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const statusFilter = document.getElementById('status-filter').value;
            const typeFilter = document.getElementById('type-filter').value;
            
            const propertyCards = document.querySelectorAll('.property-card');
            let visibleCount = 0;
            
            propertyCards.forEach(card => {
                const id = card.getAttribute('data-property-id');
                const property = properties[id];
                
                if (!property) return;
                
                const matchesSearch = property.propertyName.toLowerCase().includes(searchTerm) || 
                                    property.streetAddress.toLowerCase().includes(searchTerm) ||
                                    property.city.toLowerCase().includes(searchTerm);
                
                const matchesStatus = !statusFilter || property.propertyStatus === statusFilter;
                const matchesType = !typeFilter || property.propertyType === typeFilter;
                
                if (matchesSearch && matchesStatus && matchesType) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show empty state if no properties match filters
            document.getElementById('empty-state').style.display = visibleCount === 0 ? 'block' : 'none';
        }

        // Update Dashboard
        function updateDashboard() {
            const totalProperties = Object.keys(properties).length;
            const rentedProperties = Object.values(properties).filter(p => p.propertyStatus === 'rented').length;
            const maintenanceProperties = Object.values(properties).filter(p => p.propertyStatus === 'maintenance').length;
            
            // Calculate monthly revenue
            const monthlyRevenue = Object.values(properties).reduce((total, property) => {
                return total + (property.propertyStatus === 'rented' ? parseFloat(property.monthlyRent) : 0);
            }, 0);
            
            // Calculate occupancy rate
            const occupancyRate = totalProperties > 0 ? Math.round((rentedProperties / totalProperties) * 100) : 0;
            
            // Update dashboard elements
            document.getElementById('totalProperties').textContent = totalProperties;
            document.getElementById('monthlyRevenue').textContent = `$${monthlyRevenue.toLocaleString()}`;
            document.getElementById('occupiedUnits').textContent = `${occupancyRate}%`;
            document.getElementById('maintenanceRequests').textContent = maintenanceProperties;
            
            // Update recent properties
            const recentProperties = document.getElementById('recent-properties');
            const sortedProperties = Object.values(properties).sort((a, b) => b.id - a.id).slice(0, 3);
            recentProperties.innerHTML = sortedProperties.map(property => createPropertyCard(property)).join('');
        }

        // Update Cash Flow
        function updateCashFlow() {
            // Calculate income from rented properties
            const totalIncome = Object.values(properties).reduce((total, property) => {
                return total + (property.propertyStatus === 'rented' ? parseFloat(property.monthlyRent) : 0);
            }, 0);
            
            // Calculate expenses (estimated as 25% of income)
            const totalExpenses = totalIncome * 0.25;
            const netProfit = totalIncome - totalExpenses;
            
            // Update cash flow elements
            document.getElementById('totalIncome').textContent = `$${totalIncome.toLocaleString()}`;
            document.getElementById('totalExpenses').textContent = `$${totalExpenses.toLocaleString()}`;
            document.getElementById('netProfit').textContent = `$${netProfit.toLocaleString()}`;
            
            // Update transactions list
            updateTransactions();
        }

        // Update Transactions
        function updateTransactions() {
            const transactionsList = document.getElementById('transactions-list');
            const rentedProperties = Object.values(properties).filter(p => p.propertyStatus === 'rented');
            
            if (rentedProperties.length === 0) {
                transactionsList.innerHTML = '<p>No recent transactions</p>';
                return;
            }
            
            // Create mock transactions based on rented properties
            const transactions = rentedProperties.map(property => {
                const date = new Date();
                date.setDate(date.getDate() - Math.floor(Math.random() * 7));
                
                return {
                    name: `Rent Payment - ${property.propertyName}`,
                    date: date.toLocaleDateString(),
                    time: `${Math.floor(Math.random() * 12) + 1}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')} ${Math.random() > 0.5 ? 'AM' : 'PM'}`,
                    amount: parseFloat(property.monthlyRent),
                    type: 'income'
                };
            });
            
            // Sort by date (newest first)
            transactions.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Render transactions
            transactionsList.innerHTML = transactions.map(transaction => `
                <div class="transaction-item">
                    <div class="transaction-info">
                        <h4>${transaction.name}</h4>
                        <p>${transaction.date}  ${transaction.time}</p>
                    </div>
                    <div class="transaction-amount ${transaction.type}">
                        ${transaction.type === 'income' ? '+' : '-'}$${transaction.amount.toLocaleString()}
                    </div>
                </div>
            `).join('');
        }

        // Image Upload Handler
        const imageUpload = document.getElementById('imageUpload');
        const imagePreview = document.getElementById('imagePreview');

        imageUpload.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            
            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        uploadedImages.push({
                            name: file.name,
                            data: e.target.result
                        });
                        displayImages();
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
        });

        function displayImages() {
            imagePreview.innerHTML = '';
            uploadedImages.forEach((img, index) => {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                previewItem.innerHTML = `
                    <img src="${img.data}" alt="${img.name}">
                    <button class="preview-remove" onclick="removeImage(${index})">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                imagePreview.appendChild(previewItem);
            });
        }

        function removeImage(index) {
            uploadedImages.splice(index, 1);
            displayImages();
        }

        // Drag and Drop for Image Upload
        const uploadArea = document.querySelector('.upload-area');

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.background = 'rgba(102, 126, 234, 0.15)';
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.background = 'rgba(102, 126, 234, 0.05)';
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.background = 'rgba(102, 126, 234, 0.05)';
            
            const files = Array.from(e.dataTransfer.files);
            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImages.push({
                            name: file.name,
                            data: e.target.result
                        });
                        displayImages();
                    };
                    reader.readAsDataURL(file);
                }
            });
        });

        // Form submission handler
        document.getElementById('propertyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formMode = document.getElementById('formMode').value;
            const propertyId = document.getElementById('propertyId').value;
            
            // Collect form data
            const formData = new FormData(e.target);
            const propertyData = {};
            
            for (let [key, value] of formData.entries()) {
                if (key !== 'amenities') {
                    propertyData[key] = value;
                }
            }
            
            // Collect amenities
            const amenities = Array.from(document.querySelectorAll('input[name="amenities"]:checked'))
                .map(cb => cb.value);
            propertyData.amenities = amenities;
            
            // Add images
            if (uploadedImages.length > 0) {
                propertyData.images = uploadedImages;
                propertyData.image = uploadedImages[0].data;
            }
            
            if (formMode === 'edit' && propertyId) {
                // Update existing property
                propertyData.id = parseInt(propertyId);
                properties[propertyId] = { ...properties[propertyId], ...propertyData };
                alert('Property updated successfully! ');
            } else {
                // Add new property
                propertyData.id = nextPropertyId++;
                properties[propertyData.id] = propertyData;
                alert('Property added successfully! ');
            }
            
            // Reset form and switch to properties page
            resetPropertyForm();
            showPage('properties');
        });

        // Auto-calculate loan payment
        function calculateMonthlyPayment() {
            const loanAmount = parseFloat(document.getElementById('loanAmount')?.value) || 0;
            const interestRate = parseFloat(document.getElementById('interestRate')?.value) || 0;
            const loanTerm = parseFloat(document.getElementById('loanTerm')?.value) || 0;
            const monthlyPaymentField = document.getElementById('monthlyPayment');
            
            if (loanAmount > 0 && interestRate > 0 && loanTerm > 0) {
                const monthlyRate = (interestRate / 100) / 12;
                const numPayments = loanTerm * 12;
                const payment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numPayments)) / 
                               (Math.pow(1 + monthlyRate, numPayments) - 1);
                
                if (monthlyPaymentField) {
                    monthlyPaymentField.value = payment.toFixed(2);
                }
            }
        }

        // Auto-calculate Cap Rate
        function calculateCapRate() {
            const monthlyRent = parseFloat(document.getElementById('monthlyRent')?.value) || 0;
            const annualExpenses = parseFloat(document.getElementById('hoaFees')?.value) * 12 || 0;
            const purchasePrice = parseFloat(document.getElementById('purchasePrice')?.value) || 0;
            const capRateField = document.getElementById('capRate');
            
            if (monthlyRent > 0 && purchasePrice > 0) {
                const annualIncome = monthlyRent * 12;
                const noi = annualIncome - annualExpenses;
                const capRate = (noi / purchasePrice) * 100;
                
                if (capRateField) {
                    capRateField.value = capRate.toFixed(2);
                }
            }
        }

        // Add event listeners for calculations
        document.addEventListener('DOMContentLoaded', function() {
            // Loan calculation
            const loanAmountField = document.getElementById('loanAmount');
            const interestRateField = document.getElementById('interestRate');
            const loanTermField = document.getElementById('loanTerm');
            
            if (loanAmountField) {
                loanAmountField.addEventListener('input', calculateMonthlyPayment);
            }
            if (interestRateField) {
                interestRateField.addEventListener('input', calculateMonthlyPayment);
            }
            if (loanTermField) {
                loanTermField.addEventListener('input', calculateMonthlyPayment);
            }
            
            // Cap rate calculation
            const monthlyRentField = document.getElementById('monthlyRent');
            const hoaFeesField = document.getElementById('hoaFees');
            const purchasePriceField = document.getElementById('purchasePrice');
            
            if (monthlyRentField) {
                monthlyRentField.addEventListener('input', calculateCapRate);
            }
            if (hoaFeesField) {
                hoaFeesField.addEventListener('input', calculateCapRate);
            }
            if (purchasePriceField) {
                purchasePriceField.addEventListener('input', calculateCapRate);
            }
            
            // Search and filter
            const searchInput = document.getElementById('search-input');
            const statusFilter = document.getElementById('status-filter');
            const typeFilter = document.getElementById('type-filter');
            
            if (searchInput) {
                searchInput.addEventListener('input', filterProperties);
            }
            if (statusFilter) {
                statusFilter.addEventListener('change', filterProperties);
            }
            if (typeFilter) {
                typeFilter.addEventListener('change', filterProperties);
            }
            
            // Delete confirmation
            const confirmDeleteBtn = document.getElementById('confirm-delete');
            if (confirmDeleteBtn) {
                confirmDeleteBtn.addEventListener('click', confirmDelete);
            }
        });

        // Initial render
        renderProperties();
        updateDashboard();
        updateCashFlow();
    </script>
</body>
</html>